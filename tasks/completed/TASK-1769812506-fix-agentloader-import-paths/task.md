# TASK-1769812506: Fix AgentLoader Import Paths (Unblocks Agent Loading)

**Status:** pending
**Priority:** CRITICAL
**Created:** 2026-01-30T22:35:06Z
**Agent:** Agent-2.3
**Project:** RALF-CORE
**Generated By:** first-principles

---

## Objective

Fix critical import path bug in AgentLoader that prevents ALL agents (both Python and YAML) from loading. This unblocks 18 specialist YAML agents and enables the full agent registry.

## Success Criteria

- [ ] agent_loader.py imports ClaudeCodeAgentMixin successfully
- [ ] ClaudeCodeAgentMixin imports ClaudeCodeClient successfully
- [ ] AgentLoader loads all 3 Python agents
- [ ] AgentLoader loads all 18 YAML specialist agents
- [ ] Total 21+ agents load successfully
- [ ] No ModuleNotFoundError exceptions

## Context

### Source Analysis
- **First Principles Insight:** AgentLoader was trying to import but failing due to incorrect path calculation
- **Current Blocker:** Import path bug prevents ANY agent loading
- **Impact:** 18 specialist agents inaccessible, blocks PLAN-002 and PLAN-003

### Root Cause

**agent_loader.py:18-21** - Incorrect parent directory count:
```python
# Current (WRONG):
sys.path.insert(0, str(Path(__file__).parent.parent.parent))
# Goes up 3 levels from core/agent_loader.py to agents/ instead of core/
```

**Should be:**
```python
# Fixed (CORRECT):
sys.path.insert(0, str(Path(__file__).parent.parent.parent.parent))
# Goes up 4 levels from core/agent_loader.py to reach 2-engine/
```

**ClaudeCodeAgentMixin.py:20** - Also has incorrect import:
```python
# Current (WRONG):
from client.ClaudeCodeClient import ClaudeCodeClient

# Should be (CORRECT):
from core.interface.client.ClaudeCodeClient import ClaudeCodeClient
# or use relative import
```

### Files to Modify

| File | Lines | Description |
|------|-------|-------------|
| `agent_loader.py:18-21` | 3 | Fix path calculation (parent.parent.parent → parent.parent.parent.parent) |
| `ClaudeCodeAgentMixin.py:20` | 1 | Fix import path or use relative import |

### Agent Loading Stats

| Type | Count | Status |
|------|-------|--------|
| Python Agents | 3 | Blocked by import |
| YAML Specialists | 18 | Blocked by import |
| **Total** | **21** | **0% loading** |

## Approach

**Quick Flow** - Simple bug fix with clear requirements:
1. **Pre-Execution Research** - ✅ Complete (found exact issue)
2. **QUICK-SPEC Phase** - Restate goal, verify files, assess risk
3. **DEV-STORY Phase** - Make atomic changes, test imports
4. **CODE-REVIEW Phase** - Validate agents load

## Risk Level

**MEDIUM** - Import path changes are straightforward but errors will prevent agent loading. However, the system is already broken (0 agents loading), so risk is low.

## Rollback Strategy

1. Git stash/branch before changes
2. Each fix is atomic and reversible
3. Test import after each change
4. If broken, revert immediately

## Files to Modify

| File | Path | Changes |
|------|------|---------|
| agent_loader.py | `2-engine/core/agents/definitions/core/agent_loader.py` | Line 20: Add 4th .parent |
| ClaudeCodeAgentMixin.py | `2-engine/core/interface/client/ClaudeCodeAgentMixin.py` | Line 20: Fix import path |

## Path Selection

**Quick Flow** - Bug fix with known solution. Changes are minimal (2 lines total), success criteria are clear (imports work, agents load).

## Completion

**Completed:** 2026-01-30T22:37:11Z
**Run Folder:** /Users/shaansisodia/.blackbox5/5-project-memory/ralf-core/.autonomous/runs/run-1769812631
**Agent:** Agent-2.3
**Path Used:** quick
**Phase Gates:** All passed
**Decisions Recorded:** 3

### Results

- Python agents: 3/3 loading (100%)
- YAML specialists: 18/18 loading (100%)
- Total: 21/21 agents loading (100%)

### Files Modified

1. `agent_loader.py` - Fixed sys.path calculation
2. `ClaudeCodeAgentMixin.py` - Fixed import path
3. `DeveloperAgent.py` - Fixed all imports
4. `AnalystAgent.py` - Fixed all imports
5. `ArchitectAgent.py` - Fixed all imports

### Validation

- ✅ Imports work correctly
- ✅ 21/21 agents load successfully
- ✅ No ModuleNotFoundError exceptions
- ✅ Committed: c7f5e51
