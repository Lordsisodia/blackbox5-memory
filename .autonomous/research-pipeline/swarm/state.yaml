swarm_state:
  version: "1.0.0"
  timestamp: "2026-02-04T10:00:00Z"
  last_updated_by: system

pipeline_state:
  scout_phase:
    status: idle  # idle, active, paused, bottleneck
    queue_depth: 0
    processing_rate: 0.0  # sources/hour
    output_rate: 0.0  # patterns/hour
    bottleneck: false
    last_activity: null

  analyst_phase:
    status: idle
    queue_depth: 0
    processing_rate: 0.0  # patterns/hour
    output_rate: 0.0  # recommendations/hour
    bottleneck: false
    last_activity: null

  planner_phase:
    status: idle
    queue_depth: 0
    processing_rate: 0.0  # recommendations/hour
    output_rate: 0.0  # tasks/hour
    bottleneck: false
    last_activity: null

work_routing:
  # Automatic work distribution rules
  scout_output:
    target: analyst-worker
    distribution: priority  # round_robin, load_balanced, priority
    priority_field: confidence  # Which field to prioritize by

  analyst_output:
    target: planner-worker
    distribution: priority
    priority_field: score  # value/complexity ratio

  validator_feedback:
    target: worker  # Routes back to the worker
    distribution: direct  # Direct routing to specific worker

resource_allocation:
  # Token budget allocation across agents
  scout-worker:
    budget_per_run: 3000
    max_runs_per_hour: 6
    current_runs_this_hour: 0

  scout-validator:
    budget_per_run: 1000
    max_runs_per_hour: 6
    current_runs_this_hour: 0

  analyst-worker:
    budget_per_run: 4800
    max_runs_per_hour: 4
    current_runs_this_hour: 0

  analyst-validator:
    budget_per_run: 1200
    max_runs_per_hour: 4
    current_runs_this_hour: 0

  planner-worker:
    budget_per_run: 3600
    max_runs_per_hour: 3
    current_runs_this_hour: 0

  planner-validator:
    budget_per_run: 600
    max_runs_per_hour: 3
    current_runs_this_hour: 0

coordination_rules:
  # Rules for swarm coordination
  bottleneck_detection:
    threshold_ratio: 1.5  # If input > output * 1.5, bottleneck
    min_samples: 5  # Minimum measurements before triggering

  auto_scaling:
    enabled: true
    scale_up_threshold: 0.8  # Scale up at 80% capacity
    scale_down_threshold: 0.3  # Scale down at 30% capacity
    max_scale_factor: 2.0  # Max 2x scaling

  failure_handling:
    max_consecutive_failures: 3
    backoff_seconds: 60
    alert_on_failure: true
