# Skill Effectiveness Metrics System
# BlackBox5 - Operations
#
# Purpose: Measure skill effectiveness through quantifiable metrics to improve
#          skill selection accuracy and task completion efficiency.
#
# Usage:
#   - Review metrics weekly to identify skill performance trends
#   - Use effectiveness scores to guide skill selection
#   - Update metrics after each task completion in the task_outcomes section
#   - Generate recommendations based on ROI analysis
#
# Integration: This file works alongside skill-usage.yaml to provide
#              comprehensive skill performance analytics.

# ============================================================================
# Effectiveness Metrics Schema
# ============================================================================

metrics_schema:
  version: "1.0.0"
  last_updated: "2026-02-01T09:00:00Z"
  calculation_method: "weighted_composite"

  # Effectiveness Score Components (0-100 scale)
  components:
    - name: success_rate
      weight: 0.35
      description: "Percentage of tasks completed successfully using this skill"
      formula: "(success_count / total_invocations) * 100"

    - name: time_efficiency
      weight: 0.25
      description: "How quickly tasks are completed vs baseline"
      formula: "(baseline_time - actual_time) / baseline_time * 100"

    - name: trigger_accuracy
      weight: 0.20
      description: "How often the skill was the right choice for the task"
      formula: "correct_selections / total_selections * 100"

    - name: quality_score
      weight: 0.15
      description: "Average quality rating of task outcomes (1-5 scale)"
      formula: "sum(quality_ratings) / count(quality_ratings) * 20"

    - name: reuse_rate
      weight: 0.05
      description: "Percentage of tasks where skill was used again for similar work"
      formula: "reuse_count / total_invocations * 100"

# ============================================================================
# Skill Effectiveness Data
# ============================================================================

skills:
  # --------------------------------------------------------------------------
  # BMAD Agent Skills
  # --------------------------------------------------------------------------

  - name: bmad-pm
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 45
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "PRD creation, requirements gathering, feature definition"
      when_to_avoid: "Simple tasks, coding-only work"
      confidence: "low"

  - name: bmad-architect
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 60
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Architecture questions, design decisions, refactoring, integration planning"
      when_to_avoid: "Quick fixes, documentation-only tasks"
      confidence: "low"

  - name: bmad-analyst
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 40
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Research tasks, data analysis, pattern identification"
      when_to_avoid: "Implementation work, straightforward coding"
      confidence: "low"

  - name: bmad-sm
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 30
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Process questions, coordination, sprint planning"
      when_to_avoid: "Technical implementation, solo coding tasks"
      confidence: "low"

  - name: bmad-ux
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 50
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "UI/UX questions, design decisions, user flows"
      when_to_avoid: "Backend-only work, API development"
      confidence: "low"

  - name: bmad-dev
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 35
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Implementation, coding tasks, testing, code review"
      when_to_avoid: "High-level planning, architecture decisions"
      confidence: "low"

  - name: bmad-qa
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 40
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Testing strategy, test plans, quality questions"
      when_to_avoid: "Feature development, non-testing work"
      confidence: "low"

  - name: bmad-tea
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 30
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Autonomous task execution, RALF workflows"
      when_to_avoid: "Complex decision-making, novel problems"
      confidence: "low"

  - name: bmad-quick-flow
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 15
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Simple tasks, quick fixes, straightforward implementations"
      when_to_avoid: "Complex problems, multi-file changes"
      confidence: "low"

  - name: bmad-planning
    category: agent
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 45
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Task planning, project organization, roadmap creation"
      when_to_avoid: "Execution work, implementation tasks"
      confidence: "low"

  # --------------------------------------------------------------------------
  # Protocol & Framework Skills
  # --------------------------------------------------------------------------

  - name: superintelligence-protocol
    category: protocol
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 90
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Architecture questions, design decisions, complex problems, 'Should we...', 'How should we...'"
      when_to_avoid: "Simple fixes, clear-cut decisions"
      confidence: "low"

  - name: continuous-improvement
    category: protocol
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 60
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "improve, optimize, refine, iterate keywords; recurring friction"
      when_to_avoid: "First-time tasks, emergency fixes"
      confidence: "low"

  - name: run-initialization
    category: protocol
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 10
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "New run setup, BlackBox5 workflow initialization"
      when_to_avoid: "N/A - Always use for new runs"
      confidence: "low"

  # --------------------------------------------------------------------------
  # Utility Skills
  # --------------------------------------------------------------------------

  - name: web-search
    category: utility
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 20
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Research requiring external information, current events, documentation lookup"
      when_to_avoid: "Internal codebase questions, known information"
      confidence: "low"

  - name: codebase-navigation
    category: utility
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 25
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Finding code, understanding structure, exploring unfamiliar codebases"
      when_to_avoid: "Known codebase, specific file locations"
      confidence: "low"

  - name: supabase-operations
    category: utility
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 30
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Supabase database operations, RLS policies, migrations"
      when_to_avoid: "Non-Supabase databases, non-database work"
      confidence: "low"

  # --------------------------------------------------------------------------
  # Core System Skills
  # --------------------------------------------------------------------------

  - name: truth-seeking
    category: core
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 20
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Assumption validation, fact checking, uncertainty reduction"
      when_to_avoid: "Clear-cut decisions, routine work"
      confidence: "low"

  - name: git-commit
    category: core
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 10
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Git operations, commits, PRs"
      when_to_avoid: "N/A - Always use for git operations"
      confidence: "low"

  - name: task-selection
    category: core
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 5
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Task queue management, STATE.yaml updates"
      when_to_avoid: "N/A - Always use for task selection"
      confidence: "low"

  - name: state-management
    category: core
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 5
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Progress tracking, STATE.yaml updates"
      when_to_avoid: "N/A - Always use for state updates"
      confidence: "low"

  # --------------------------------------------------------------------------
  # Infrastructure Skills
  # --------------------------------------------------------------------------

  - name: ralf-cloud-control
    category: infrastructure
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 30
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "RALF agent management, K8s operations"
      when_to_avoid: "Local development, non-infrastructure work"
      confidence: "low"

  - name: github-codespaces-control
    category: infrastructure
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 25
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "GitHub Codespaces agent spawning"
      when_to_avoid: "Local development, non-Codespaces work"
      confidence: "low"

  - name: legacy-cloud-control
    category: infrastructure
    effectiveness_score: null
    metrics:
      success_rate: null
      time_efficiency: null
      trigger_accuracy: null
      quality_score: null
      reuse_rate: null
    baseline_minutes: 30
    roi_calculation:
      time_saved_minutes: null
      quality_improvement: null
      cost_benefit_ratio: null
    recommendations:
      when_to_use: "Legacy agent management"
      when_to_avoid: "RALF operations, non-legacy work"
      confidence: "low"

# ============================================================================
# Task Outcomes Log
# ============================================================================
# Record each task outcome here to build effectiveness metrics
#
# Format:
#   - task_id: "TASK-xxx"
#     timestamp: "2026-02-01T12:00:00Z"
#     skill_used: "skill-name"
#     task_type: "implement|analyze|fix|refactor|organize"
#     duration_minutes: 35
#     outcome: "success|failure|partial"
#     quality_rating: 4  # 1-5 scale
#     trigger_was_correct: true|false
#     would_use_again: true|false
#     notes: "Observations about skill effectiveness"

task_outcomes:
  - task_id: "TASK-1769909000"
    timestamp: "2026-02-01T08:00:00Z"
    skill_used: null
    task_type: "implement"
    duration_minutes: 40
    outcome: "success"
    quality_rating: 4
    trigger_was_correct: true
    would_use_again: true
    notes: "First task with skill selection framework. No skill invoked as task was straightforward documentation work. Framework successfully documented."

# ============================================================================
# Aggregated Analysis
# ============================================================================

analysis:
  last_calculated: null

  # Top performing skills by effectiveness score
  top_skills: []

  # Skills needing improvement
  underperforming_skills: []

  # Category performance summary
  category_performance:
    - category: agent
      avg_effectiveness: null
      total_tasks: 0
      success_rate: null
    - category: protocol
      avg_effectiveness: null
      total_tasks: 0
      success_rate: null
    - category: utility
      avg_effectiveness: null
      total_tasks: 0
      success_rate: null
    - category: core
      avg_effectiveness: null
      total_tasks: 0
      success_rate: null
    - category: infrastructure
      avg_effectiveness: null
      total_tasks: 0
      success_rate: null

  # ROI Summary
  roi_summary:
    total_time_saved_minutes: 0
    avg_quality_improvement: null
    cost_benefit_ratio: null

  # Recommendations based on data
  skill_selection_recommendations:
    - scenario: "Quick fixes (< 30 min)"
      recommended_skill: "bmad-quick-flow"
      confidence: "low"

    - scenario: "Architecture decisions"
      recommended_skill: "bmad-architect"
      confidence: "low"

    - scenario: "Research and analysis"
      recommended_skill: "bmad-analyst"
      confidence: "low"

    - scenario: "Complex multi-step problems"
      recommended_skill: "superintelligence-protocol"
      confidence: "low"

  # Trigger accuracy insights
  trigger_insights:
    common_false_positives: []
    common_missed_opportunities: []
    trigger_keywords_that_work: []

# ============================================================================
# Quality Rating Guidelines
# ============================================================================

quality_rating_scale:
  5: "Excellent - Exceeded expectations, reusable solution, no issues"
  4: "Good - Met all requirements, minor improvements possible"
  3: "Acceptable - Met core requirements, some issues noted"
  2: "Below Average - Partial completion, significant issues"
  1: "Poor - Failed to meet requirements, major issues"

# ============================================================================
# Metadata
# ============================================================================

metadata:
  created: "2026-02-01T09:00:00Z"
  version: "1.0.0"
  total_tasks_tracked: 1
  calculation_frequency: "weekly"
  next_calculation_due: "2026-02-08T09:00:00Z"
  last_updated: "2026-02-01T08:00:00Z"
